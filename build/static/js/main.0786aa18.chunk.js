(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[0],{60:function(t,e,i){},61:function(t,e,i){"use strict";i.r(e);var a=i(1),n=i.n(a),s=i(27),r=i.n(s),c=i(7),l=i(8),d=i(10),o=i(9),u=i(13),j=i(2),h=i(6),b=i.n(h),x=i(0),O=function(t){Object(d.a)(i,t);var e=Object(o.a)(i);function i(){var t;Object(c.a)(this,i);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))).state={categories:"",title:"",text:"",styleText:"",intermediateText:"",id:0,link:"",articles:[],textEditing:!1,image:null,imageName:"",oldImage:""},t}return Object(l.a)(i,[{key:"informationAboutArticle",value:function(t){switch(t.target.id){case"category":this.setState({categories:t.target.value});break;case"title":this.setState({title:t.target.value});break;case"text":this.setState({text:t.target.value})}}},{key:"openAllArticles",value:function(){var t=this;this.setState((function(e){return{textEditing:!t.state.textEditing}}))}},{key:"clearContent",value:function(){this.setState((function(t){return{id:0,title:"",categories:"",text:""}}))}},{key:"addLineBreak",value:function(t){if("Enter"===t.code){var e=t.target,i=this.state.text,a=e.selectionStart,n=e.selectionEnd;this.setState({text:i.substring(0,a)+"<br/><br/>"+i.substring(n)})}}},{key:"addStyleText",value:function(t){var e=this,i=t.target;if("Enter"!==t.key||t.shiftKey){if("Enter"===t.key&&t.shiftKey)switch(i.id){case"list":this.setState({styleText:this.state.styleText+="<li>"+i.value+"</li>",intermediateText:this.state.intermediateText+=this.state.styleText}),this.setState({styleText:""}),i.value=""}}else switch(i.id){case"bold":this.setState((function(t){return{styleText:e.state.styleText=" <b>"+i.value+"</b>"}})),this.setState((function(t){return{text:e.state.text+=e.state.styleText,styleText:""}}));break;case"italic":this.setState((function(t){return{styleText:e.state.styleText=" <em>"+i.value+"</em>"}})),this.setState((function(t){return{text:e.state.text+=e.state.styleText,styleText:""}}));break;case"link":this.setState((function(t){return{styleText:e.state.styleText=" <a href="+e.state.link+">"+i.value+"</a>"}})),this.setState((function(t){return{text:e.state.text+=e.state.styleText,styleText:"",link:""}}));break;case"list":this.setState((function(t){return{styleText:e.state.styleText=" <ul>"+e.state.intermediateText+"</ul>"}})),this.setState((function(t){return{text:e.state.text+=e.state.styleText,styleText:""}}))}}},{key:"sendArticle",value:function(){var t=this;if(null===this.state.id||0===this.state.id){var e={method:"POST",url:"https://newsadminpanel-backend.onrender.com/articleAdd",data:{category:this.state.categories,titles:this.state.title,texts:this.state.text,image:this.state.image}};b.a.request(e).then((function(e){if(200===e.status){var i=e.data.id;t.setState((function(t){return{id:i}})),t.sendImage(),t.getArticles()}}))}else{var i={method:"PUT",url:"https://newsadminpanel-backend.onrender.com/article",data:{id:this.state.id,titles:this.state.title,category:this.state.categories,texts:this.state.text}};b.a.request(i).then((function(e){200===e.status&&(t.sendImage(),t.getArticles())}))}this.clearContent()}},{key:"sendImage",value:function(){var t=this,e=new FormData,i=this.state.image,a=this.state.oldImage,n=this.state.id;try{var s;this.state.oldImage===(null===(s=this.state.image)||void 0===s?void 0:s.name)?(e.append("image",i),e.append("id",n.toString())):(e.append("image",i),e.append("oldImage",a),e.append("id",n.toString()))}catch(r){}b()({method:"PUT",url:"https://newsadminpanel-backend.onrender.com/image",headers:{headers:{"Content-Type":"multipart/form-data"}},data:e}).then((function(e){200===e.status&&(t.setState({id:0}),t.getArticles())}))}},{key:"getArticle",value:function(t){var e=this,i=t.target.value;b.a.post("https://newsadminpanel-backend.onrender.com"+"/article/".concat(i)).then((function(t){if(200===t.status){var i=t.data;e.setState((function(t){return{id:e.state.id=i[0].id,title:e.state.title=i[0].title,categories:e.state.categories=i[0].category,text:e.state.text=i[0].text,imageName:e.state.imageName=i[0].image,oldImage:e.state.oldImage=i[0].image,textEditing:e.state.textEditing=!1}}))}}))}},{key:"getArticles",value:function(){var t=this;b.a.post("https://newsadminpanel-backend.onrender.com/article/").then((function(e){if(200===e.status){var i=e.data;t.setState((function(t){return{articles:i}}))}}))}},{key:"deleteArticle",value:function(){var t=this;if(null!==this.state.id||""!==this.state.id){var e={method:"DELETE",url:"https://newsadminpanel-backend.onrender.com/article/"+this.state.id,data:{image:this.state.image}};b.a.request(e).then((function(e){200===e.status&&t.getArticles()})),this.clearContent()}}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:Object(x.jsx)("h2",{children:"Create panel"})}),Object(x.jsx)("form",{children:Object(x.jsxs)("fieldset",{children:[Object(x.jsx)("legend",{children:"Create an article"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:["Add preview image: ",Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"file",onChange:function(e){if(null!==e.target.files){var i=e.target.files[0];t.setState((function(e){return{image:t.state.image=i}}))}}}),Object(x.jsx)("br",{})]}),Object(x.jsxs)("li",{children:["Enter title:",Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"title",onChange:function(e){return t.informationAboutArticle(e)},value:this.state.title})]}),Object(x.jsxs)("li",{children:["Enter category:",Object(x.jsx)("br",{}),Object(x.jsx)("input",{id:"category",onChange:function(e){return t.informationAboutArticle(e)},value:this.state.categories})]}),Object(x.jsxs)("li",{children:["Enter text:",Object(x.jsx)("br",{}),Object(x.jsx)("textarea",{id:"text",onChange:function(e){return t.informationAboutArticle(e)},value:this.state.text,onKeyDown:function(e){return t.addLineBreak(e)}})]}),Object(x.jsx)("button",{type:"button",onClick:function(){return t.sendArticle()},children:"Send"}),Object(x.jsx)("button",{type:"button",onClick:function(){t.getArticles(),t.openAllArticles()},children:"Edit"}),Object(x.jsx)("button",{type:"button",onClick:function(){return t.deleteArticle()},children:"Delete"})]}),Object(x.jsxs)("ul",{children:["style:",Object(x.jsxs)("li",{children:["Add bold: <b>",Object(x.jsx)("input",{id:"bold",onKeyDown:function(e){return t.addStyleText(e)}}),"</b>"]}),Object(x.jsxs)("li",{children:["Add italic: <em>",Object(x.jsx)("input",{id:"italic",onKeyDown:function(e){return t.addStyleText(e)}}),"</em>"]}),Object(x.jsxs)("li",{children:["Add link: <a href=",Object(x.jsx)("input",{id:"href",onChange:function(e){t.setState((function(i){return{link:t.state.link=e.target.value}}))}}),"> ",Object(x.jsx)("input",{id:"link",onKeyDown:function(e){return t.addStyleText(e)}}),"</a>"]}),Object(x.jsxs)("li",{children:["Add list: <ul> <li>",Object(x.jsx)("input",{id:"list",onKeyDown:function(e){return t.addStyleText(e)}}),"</li> </ul>",Object(x.jsx)("br",{}),Object(x.jsx)("b",{children:"to add the next line in the list press shift + enter. When you will be done press enter"}),Object(x.jsx)("br",{}),"Example:",Object(x.jsx)("br",{}),'you wrote "asd" and press shift + enter after press enter and this will be <li>asd </li> (1 set of the list)']})]})]})}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:["Category:",this.state.categories]}),Object(x.jsxs)("div",{children:["Title:",this.state.title]}),Object(x.jsx)("div",{dangerouslySetInnerHTML:{__html:"Text: "+this.state.text}})]}),Object(x.jsxs)("div",{className:!1===this.state.textEditing?"hidden":"visible",children:["All articles:",Object(x.jsx)("ul",{className:"articles_list",children:this.state.articles.map((function(e){return Object(x.jsxs)(n.a.Fragment,{children:[Object(x.jsxs)("li",{className:"articles",children:[Object(x.jsx)("img",{src:"https://newsadminpanel-backend.onrender.com/"+e.image,alt:""}),Object(x.jsx)("br",{}),e.category,Object(x.jsx)("br",{}),e.title,Object(x.jsx)("br",{}),Object(x.jsx)("p",{dangerouslySetInnerHTML:{__html:e.text}})]},e.id),Object(x.jsx)("button",{className:"article_select",type:"button",onClick:function(e){return t.getArticle(e)},value:e.id,children:"select"},e.id+" button")]},e.id+" fragment")}))})]})]})}}]),i}(n.a.Component),m=function(t){Object(d.a)(i,t);var e=Object(o.a)(i);function i(){var t;Object(c.a)(this,i);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))).state={articleId:"",articleData:[]},t}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var t=this,e=window.location.href.split("/")[4];if(this.setState({articleId:this.state.articleId=e}),this.state.articleId.trim().length>0){var i={method:"POST",url:"https://newsadminpanel-backend.onrender.com"+"/article/".concat(this.state.articleId)};console.log(i),b.a.request(i).then((function(e){if(200===e.status){var i=e.data;t.setState((function(t){return{articleData:i}}))}}))}}},{key:"render",value:function(){var t,e,i;return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"title_article",children:null===(t=this.state.articleData[0])||void 0===t?void 0:t.title}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"category_article",children:null===(e=this.state.articleData[0])||void 0===e?void 0:e.category}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"article_text",children:Object(x.jsx)("p",{dangerouslySetInnerHTML:{__html:null===(i=this.state.articleData[0])||void 0===i?void 0:i.text}})})]})})}}]),i}(n.a.Component),f=function(t){Object(d.a)(i,t);var e=Object(o.a)(i);function i(){var t;Object(c.a)(this,i);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))).state={articles:[]},t}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var t=this;b.a.post("https://newsadminpanel-backend.onrender.com/article").then((function(e){if(200===e.status){var i=e.data;console.log(e.data),t.setState((function(t){return{articles:i}}))}}))}},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Home Page"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Articles:"}),Object(x.jsx)("div",{className:"articles_roster",children:this.state.articles.map((function(t){return Object(x.jsx)(u.b,{to:"/article/"+t.id,children:Object(x.jsxs)("div",{children:[Object(x.jsx)("picture",{children:Object(x.jsx)("img",{src:"https://newsadminpanel-backend.onrender.com/"+t.image,alt:""},t.id+"img")}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title_articles",children:t.title},t.id+"title"),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"category_articles",children:t.category},t.id+"category")]},t.id+" fragment")},t.id+"link")}))})]})]})}}]),i}(n.a.Component),g=function(t){Object(d.a)(i,t);var e=Object(o.a)(i);function i(){return Object(c.a)(this,i),e.apply(this,arguments)}return Object(l.a)(i,[{key:"render",value:function(){return Object(x.jsx)(u.a,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(j.a,{path:"/article",children:Object(x.jsx)(m,{})}),Object(x.jsx)(j.a,{path:"/",exact:!0,children:Object(x.jsx)(f,{})})]})})}}]),i}(n.a.Component),p=function(t){Object(d.a)(i,t);var e=Object(o.a)(i);function i(){return Object(c.a)(this,i),e.apply(this,arguments)}return Object(l.a)(i,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsx)(u.a,{children:Object(x.jsxs)(j.c,{children:[Object(x.jsx)(j.a,{path:"/api/admin_panel",children:Object(x.jsx)(O,{})}),Object(x.jsx)(j.a,{path:"/",children:Object(x.jsx)(g,{})})]})})})}}]),i}(n.a.Component);i(60);r.a.render(Object(x.jsx)(p,{}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.0786aa18.chunk.js.map